(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5970)}])},5970:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(5893),r=n(9008),l=n.n(r),s=n(7294);function i(){let[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),i=(0,s.useRef)(null),[o,c]=(0,s.useState)(0),[u,d]=(0,s.useState)(0),[p,m]=(0,s.useState)(0),[h,f]=(0,s.useState)(""),x=e=>{let n=JSON.stringify(e),a=window.gradecmap(n),r=JSON.parse(a);r.error?t(r.message):(t(""),c(r.data.nodes),d(r.data.connections),m(r.data.longestPathLength),f(r.data.longestPath.reduce((e,t,n,a)=>0===n?t:n%2==1?e+"\n	("+t+")":e+" "+t,"")))},v=e=>{var a,r;e.preventDefault();let l=(null===(a=i.current)||void 0===a?void 0:a.files)&&(null===(r=i.current)||void 0===r?void 0:r.files[0]);if(!l&&!n)return t("Please select a file or enter a URL.");try{l||new URL(n)}catch(e){return t("Please enter a valid URL (starts with https://).")}if(l){let e=new FileReader;e.onload=()=>{var t,n;let a=null!==(n=null===(t=e.result)||void 0===t?void 0:t.split(",").pop())&&void 0!==n?n:"",r=l.name.split(".").pop();x({file:a,format:"txt"===r?0:1})},e.readAsDataURL(l)}else{let e=n.match(/([0-9A-Z]+\-[0-9A-Z]+\-[0-9A-Z]+)/);if(!e)return t("Please enter a CMAP link.");fetch("https://cmapscloud.ihmc.us/resources/id=".concat(e[0],"?cmd=get.cmap.v3")).then(e=>e.arrayBuffer()).then(e=>{let t=new Blob([e],{type:"application/octet-binary"}),n=new FileReader;n.onload=function(e){var t,a;let r=null!==(a=null===(t=n.result)||void 0===t?void 0:t.split(",").pop())&&void 0!==a?a:"";x({file:r,format:1})},n.readAsDataURL(t)}).catch(()=>{t("Failed to get information from the URL.")})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"Concept Map Grader"}),(0,a.jsx)("meta",{name:"description",content:"Concept map grading tool"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("main",{className:"container py-3",children:[(0,a.jsx)("h1",{children:"Concept Map Grader"}),(0,a.jsxs)("form",{onSubmit:v,children:[(0,a.jsxs)("p",{children:["Select a Concept Map Outline file. In CmapTools, this is available under ",(0,a.jsx)("b",{children:"Exports â€º Cmap Outline"}),"."]}),(0,a.jsx)("input",{type:"file",accept:".txt,.cxl,.xml",className:"form-control mb-3",ref:i}),(0,a.jsx)("input",{type:"url",className:"form-control mb-3",value:n,onChange:e=>{r(e.target.value),i.current&&(i.current.value="")}}),(0,a.jsx)("button",{type:"submit",className:"btn btn-dark",children:"Grade Concept Map"})]}),!e&&!!o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"input-group mt-3",children:[(0,a.jsx)("span",{className:"input-group-text",children:"Node Count"}),(0,a.jsx)("input",{type:"text",className:"form-control",readOnly:!0,value:o})]}),(0,a.jsxs)("div",{className:"input-group mt-3",children:[(0,a.jsx)("span",{className:"input-group-text",children:"Connection Count"}),(0,a.jsx)("input",{type:"text",className:"form-control",readOnly:!0,value:u})]}),(0,a.jsxs)("div",{className:"input-group mt-3",children:[(0,a.jsx)("span",{className:"input-group-text",children:"Highest Hierarchy Length"}),(0,a.jsx)("input",{type:"text",className:"form-control",readOnly:!0,value:p})]}),(0,a.jsx)("h3",{className:"mt-3",children:"Highest Hierarchy"}),(0,a.jsx)("textarea",{className:"form-control",readOnly:!0,style:{minHeight:200},value:h})]}),e&&(0,a.jsx)("div",{className:"alert alert-danger",role:"alert",children:e})]})]})}},9008:function(e,t,n){e.exports=n(3121)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);