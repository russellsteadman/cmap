(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5048)}])},5048:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(5893);let a=async()=>{let e=new Go,t=await WebAssembly.instantiateStreaming(fetch("cmap.wasm"),e.importObject);e.run(t.instance)};var s=n(9008),i=n.n(s),c=n(7294),o=n(2293),l=n(155),d=n(9520),h=n(8862),u=n(629),m=n(5478),p=n(3321),x=n(8462),f=n(891),g=n(796),y=n(9953),b=n(5568),v=n(2401),j=n(480),E=n(5071),C=n(9053),w=n(6565),T=n(5221),Z=n(341),D=n(9483),A=n.n(D),R=n(2300);let O=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xml";if("https://russellsteadman.github.io"!==window.location.origin)return;let n=await A().getItem("consent");if("deny"===n)return;let{txt:r,xml:a}=await fetch("https://dct5owtjmmdul7yulomrlknbcu0amlcc.lambda-url.us-east-1.on.aws/").then(e=>e.json()).catch(e=>{throw console.error(e),Error("Failed to fetch Lambda url")}),s=(0,R.Jx)(e);await fetch("txt"===t?r:a,{method:"PUT",body:s=s.replace(/\<res-meta\>(.|\r\n|\n)*\<\/res-meta\>/gim,"<res-meta><dc:title>REDACTED TITLE</dc:title><dc:format>x-cmap/x-storable</dc:format><dc:creator><vcard:FN>REDACTED NAME</vcard:FN><vcard:EMAIL>redacted@example.com</vcard:EMAIL><vcard:Org><vcard:Orgname>REDACTED ORG</vcard:Orgname></vcard:Org></dc:creator><dc:contributor><vcard:FN>REDACTED NAME</vcard:FN><vcard:EMAIL>redacted@example.com</vcard:EMAIL><vcard:Org><vcard:Orgname>REDACTED ORG</vcard:Orgname></vcard:Org></dc:contributor><dc:language>en</dc:language><dc:extent>9999 bytes</dc:extent><dc:source>cmap:1REDACTED-REDACTE-D:uid=00000000-0000-0000-0000-000000000000,ou=users,dc=cmapcloud,dc=ihmc,dc=us:1REDACTED-REDACTE-D</dc:source><dc:identifier>https://cmapscloud.ihmc.us:443/id=1REDACTED-REDACTE-D/REDACTED.cmap?sid=1REDACTED-REDACTE-D</dc:identifier><dc:publisher>REDACTED PUB</dc:publisher><dcterms:modified>2023-01-01T01:00:00-00:00</dcterms:modified><dcterms:created>2023-01-01T01:00:00-00:00</dcterms:created></res-meta>"),headers:{"Content-Type":"txt"===t?"text/plain":"text/xml"}}).catch(e=>{throw console.error(e),Error("Unable to send sample to S3")})},_=(e,t)=>{try{gtag("event","interaction",{interaction_type:e,message:t})}catch(e){console.error("Unable to log event to Google Analytics",e)}},N=(e,t)=>{try{gtag("event","summary_stats",{number_concepts:e,highest_hierarchy:t})}catch(e){console.error("Unable to log event to Google Analytics",e)}};var k=n(4487);function P(){let[e,t]=(0,c.useState)(""),[n,s]=(0,c.useState)(""),D=(0,c.useRef)(null),[R,P]=(0,c.useState)(),[S,L]=(0,c.useState)(!0),[I,F]=(0,c.useState)(!0);(0,c.useEffect)(()=>{A().getItem("consent").then(e=>{"deny"===e&&F(!1)})},[]);let M=async()=>{let e=await A().getItem("consent")==="deny";e?(await A().setItem("consent","allow"),F(!0),_("consent_accept")):(await A().setItem("consent","deny"),F(!1),_("consent_reject"))},U=e=>{O(e.file,1===e.format?"xml":"txt");let n=JSON.stringify(e),r=window.gradecmap(n),a=JSON.parse(r);if(a.error){if("multiple start nodes"===a.message.split(":")[0])return _("grade_failure","multiple start nodes"),t("Make sure that all concepts EXCEPT for the main concept have other concepts linking TOWARDS them (e.g. OTHER CONCEPT ➔ CONCEPT). Nodes without TO links include: "+a.message.split(": ").pop());if("no start nodes"===a.message)return _("grade_failure",a.message),t("The central concept should not have other concepts linking TOWARDS it. To fix this issue, remove the link TOWARDS the main concept (e.g. OTHER CONCEPT ➔ MAIN CONCEPT).");t(a.message),_("grade_failure",a.message)}else t(""),P(a.data),console.log(a.data),_("grade_success"),N(a.data.nc,a.data.hh)},H=e=>{var r,a;e.preventDefault(),_("grade_click");let s=(null===(r=D.current)||void 0===r?void 0:r.files)&&(null===(a=D.current)||void 0===a?void 0:a.files[0]);if(!s&&!n)return t("Please select a file or enter a URL.");try{s||new URL(n)}catch(e){return t("Please enter a valid URL (starts with https://).")}if(s){let e=new FileReader;e.onload=()=>{var t,n;let r=null!==(n=null===(t=e.result)||void 0===t?void 0:t.split(",").pop())&&void 0!==n?n:"",a=s.name.split(".").pop();_("txt"===a?"file_text":"file_xml"),U({file:r,format:"txt"===a?0:1})},e.readAsDataURL(s)}else{let e=n.match(/([0-9A-Z]+\-[0-9A-Z]+\-[0-9A-Z]+)/);if(!e)return t("Please enter a CMAP link.");fetch("https://cmapscloud.ihmc.us/resources/id=".concat(e[0],"?cmd=get.cmap.v3")).then(e=>e.arrayBuffer()).then(e=>{_("fetch_link");let t=new Blob([e],{type:"application/octet-binary"}),n=new FileReader;n.onload=function(e){var t,r;let a=null!==(r=null===(t=n.result)||void 0===t?void 0:t.split(",").pop())&&void 0!==r?r:"";U({file:a,format:1})},n.readAsDataURL(t)}).catch(e=>{(0,k.Tb)(e),console.error(e),t("Failed to get information from the URL.")})}};return(0,c.useEffect)(()=>{let e=!0;return a().then(()=>{e&&L(!1)}),()=>{e=!1}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"Concept Map Grader"}),(0,r.jsx)("meta",{name:"description",content:"Concept map grading tool"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,r.jsxs)("main",{children:[(0,r.jsx)(o.Z,{position:"static",children:(0,r.jsx)(l.Z,{children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(h.Z,{variant:"h6",component:"h1",children:"Concept Map Grader"})})})}),(0,r.jsxs)(d.Z,{sx:{py:3},children:[(0,r.jsxs)("p",{children:["You can use either the CmapTools desktop app or the CmapCloud web app to check your score. For desktop app users, select"," ",(0,r.jsx)("b",{children:"Export > Cmap Outline"}),". For web app users, select"," ",(0,r.jsx)("b",{children:"Export to CXL"})," on the left-hand side. Alternatively, web app users can click ",(0,r.jsx)("b",{children:"Open in Cmap Viewer"})," and provide the url without downloading anything."]}),(0,r.jsx)(u.Z,{sx:{py:2,mb:2},children:(0,r.jsx)(d.Z,{children:(0,r.jsxs)("form",{onSubmit:H,children:[(0,r.jsx)("label",{htmlFor:"file"}),(0,r.jsx)(m.Z,{type:"file",fullWidth:!0,inputProps:{accept:".txt,.cxl,.xml"},inputRef:D,id:"file",onChange:e=>{let t=e.target;t.files&&t.files[0]&&s("")},sx:{my:2},label:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("code",{children:".cxl"})," file or Concept Map Outline"," ",(0,r.jsx)("code",{children:".txt"})," file"]}),InputLabelProps:{shrink:!0}}),(0,r.jsx)(m.Z,{type:"url",value:n,placeholder:"https://cmapscloud.ihmc.us/...",onChange:e=>{s(e.target.value),D.current&&(D.current.value="")},fullWidth:!0,label:"CmapCloud Concept Map URL",sx:{my:2}}),(0,r.jsx)(p.Z,{variant:"contained",type:"submit",disabled:S,startIcon:(0,r.jsx)(C.Z,{}),sx:{mt:2},children:"Grade Concept Map"})]})})}),!e&&!!R&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("hr",{}),(0,r.jsx)("h2",{children:"Results"}),(0,r.jsx)(u.Z,{sx:{py:2,mb:2},children:(0,r.jsxs)(d.Z,{children:[(0,r.jsxs)(x.Z,{children:[(0,r.jsxs)(f.ZP,{children:[(0,r.jsx)(g.Z,{children:(0,r.jsx)(w.Z,{})}),(0,r.jsx)(y.Z,{primary:"Number of Concepts (NC): ".concat(R.nc)})]}),(0,r.jsxs)(f.ZP,{children:[(0,r.jsx)(g.Z,{children:(0,r.jsx)(T.Z,{})}),(0,r.jsx)(y.Z,{primary:"Highest Hierarchy (HH): ".concat(R.hh)})]}),(0,r.jsxs)(f.ZP,{children:[(0,r.jsx)(g.Z,{children:(0,r.jsx)(Z.Z,{})}),(0,r.jsx)(y.Z,{primary:(0,r.jsxs)(r.Fragment,{children:["Simple Score (NC + 5 \xd7 HH):"," ",R.nc+5*R.hh]})})]})]}),(0,r.jsx)(m.Z,{label:"Highest Hierarchy",multiline:!0,inputProps:{readOnly:!0},fullWidth:!0,sx:{my:2},minRows:4,value:R.longestPath.reduce((e,t,n,r)=>0===n?t:n%2==1?e+"\n	("+t+")":e+" "+t,"")})]})})]}),e&&(0,r.jsxs)(b.Z,{severity:"error",sx:{my:3},children:[(0,r.jsx)(v.Z,{children:"Error"}),e]}),(0,r.jsxs)(h.Z,{variant:"body2",sx:{mb:1},children:[(0,r.jsx)("b",{children:"Limitations of Testing:"})," This tool is intended to work for human-generated concept maps, where the number of concepts is less than 1,000. Excessively large (> 1,000 node) concept maps may cause the tool to run slowly or crash."]}),(0,r.jsxs)(h.Z,{variant:"body2",sx:{mb:1},children:[(0,r.jsx)("b",{children:"Privacy Notice:"})," This tool collects anonymous data including: telemetry, usage analytics, concept map summary statistics, and, if voluntarily allowed, concept map data. This data is used to improve the tool, drive research, and to provide a better user experience. This tool does not intentionally collect any personally identifiable information."]}),(0,r.jsxs)(h.Z,{variant:"body2",children:[(0,r.jsx)("b",{children:"Consent for Data Collection:"})," By using this tool, you voluntarily consent to the collection of data as described above. You can opt-out of data collection of concept maps by unchecking the box below. This will not affect your ability to use the tool."]}),(0,r.jsx)(j.Z,{control:(0,r.jsx)(E.Z,{checked:I,onChange:M}),label:"I consent to donating my concept maps.",componentsProps:{typography:{variant:"body2"}}}),(0,r.jsxs)(h.Z,{variant:"body2",sx:{mb:1},children:["Please submit"," ",(0,r.jsx)("a",{href:"https://github.com/russellsteadman/cmap/issues/new",target:"_blank",rel:"noreferrer",children:"bugs and accessibility issues"})," ","if you find any. This requires a GitHub account, which is free and easy to set up."]}),(0,r.jsxs)(h.Z,{variant:"body2",children:["Copyright \xa9 2023 The Ohio State University. See"," ",(0,r.jsx)("a",{href:"https://github.com/russellsteadman/cmap/blob/main/LICENSE",target:"_blank",rel:"noreferrer",children:"LICENSE"})," ","file."]})]})]})]})}}},function(e){e.O(0,[633,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);